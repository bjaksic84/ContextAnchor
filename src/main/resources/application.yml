spring:
  application:
    name: enterprise-rag-platform

  servlet:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB

  datasource:
    url: jdbc:postgresql://localhost:5432/ragdb
    username: raguser
    password: ragpassword
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  ai:
    openai:
      api-key: ${OPENAI_API_KEY:your-api-key-here}
      chat:
        options:
          model: gpt-4o-mini
          temperature: 0.3
      embedding:
        options:
          model: text-embedding-3-small
    vectorstore:
      pgvector:
        dimensions: 1536
        index-type: hnsw
        distance-type: cosine_distance

# Security / JWT configuration
security:
  jwt:
    secret: ${JWT_SECRET:your-256-bit-secret-key-change-in-production-minimum-32-chars}
    access-token-expiration: 900000    # 15 minutes in milliseconds
    refresh-token-expiration: 604800000 # 7 days in milliseconds

# Application-specific configuration
rag:
  chunking:
    chunk-size: 800
    chunk-overlap: 200
    min-chunk-size: 100
  upload:
    storage-path: ./uploads
    allowed-types:
      - application/pdf
      - text/plain
      - application/vnd.openxmlformats-officedocument.wordprocessingml.document
  chat:
    max-history-size: 10
    top-k-results: 5
    system-prompt: >
      You are a helpful assistant that answers questions based on the provided document context.
      Always base your answers on the context provided. If the context doesn't contain enough
      information to answer the question, say so clearly. Cite the relevant parts of the documents
      when possible.

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics

# Swagger / OpenAPI
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method

server:
  port: 8080
